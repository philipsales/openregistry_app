<!-- start section-->
<div class="col-md-12 col-sm-12 col-xs-12"> 
  <div class="form_panel col-sm-8" style="" >

      <form [formGroup]="questionFormGroup">
        <div formArrayName="secretLairs" [dragula]='"bag-one"'>

          <div *ngFor="let question of secretLairs.controls; let x=index;
             trackBy: trackByFn"
             formGroupName="{{x}}">

            Question: {{x + 1}}
            <br/>
            <div class="form-group" >
                <!--hidden key input -->
                <input class="form-control"
                       type="hidden"
                       formControlName="key">
            </div>

            <div class="row">
              <div class="form-group">
                <div class="col-sm-6">

                  <!--question label input -->
                  <label class="center-block">Question:
                    <input class="form-control"
                           placeholder="Untitled question"
                           formControlName="label">
                  </label>
                </div>
                <div class="col-sm-6">

                  <!--question type input -->
                  <label class="center-block">Type:
                    <select class="form-control" formControlName="type">
                      <option *ngFor="let type of questionTypes"
                      [value]="type.value">{{type.label}}</option>
                    </select>
                  </label>
                </div>
              </div>
            </div>


            <div class="form-group"
              *ngIf="question.get('type').value=='dropdown' ||
                     question.get('type').value=='checkbox' ||
                     question.get('type').value=='radiobutton' ">

              <label class="center-block">Value
                Selection separated by '|'   <span class="required">*</span>
                <!--<input type="text" id="input_value" 
                       class="form-control" formControlName="value">-->
                <input type="text" id="input_options" 
                       class="form-control" 
                       value="{{texts}}"
                       formControlName="options" >


                <div>
                  <div class="row" 
                       *ngFor="let option of optionsArray; let y = index;" >
                    <div class="form-group">
                      <div class="col-sm-10">
                        <input type="text"  
                               #myInput
                               (input)="valueChange($event.target.value,y,$event)"
                               class="form-control">
                      </div>
                      <div class="col-sm-2">
                        <a class="edit " 
                           (click)="onDeleteOption(myInput.value,y);
                           $event.stopPropagation()"> 
                           <i class="fa fa-2x fa-trash-o"></i></a>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row"  >
                  <div class="form-group">
                    <span class="form-side-editor-fxn " 
                        (click)="onAddOption()">
                        <a  [routerLink]="['.']">
                          <i class="fa fa-1x fa-plus">Add option</i>
                        </a>
                    </span>
                  </div>
                </div>




              </label>


            </div>


            <div class="form-group">
              <label class="center-block">Order:
                <input class="form-control"
                       value="{{x+1}}"
                       formControlName="order">
              </label>
            </div>

            <div class="ln_solid"></div>

            <div class="row">
              <div class="col-sm-12">
                <div class="form-group">
                  <div class="ln_solid"></div>
                  <span class="form-footer-editor-fxn col-sm-1 pull-right" 
                      (click)="onDeleteQuestion(x)">
                    <i class="fa fa-3x fa-trash-o"></i>
                  </span>
                  <span class="form-footer-editor-fxn col-sm-1 pull-right" 
                      (click)="onCloneQuestion(question,x)">
                    <i class="fa fa-3x fa-clone"></i>
                  </span>
                  <span class="checkbox form-footer-editor-fxn col-sm-3 pull-right" >
                    <label class="pull-right">
                      <input type="checkbox" name="input_required"
                           formControlName="required"
                           [checked]="question.required"
                           id="input_required"> Is Required?
                    </label>
                  </span>
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>



          </div>
        </div>
        </form>

        <!--<pre>
        <p>questionForm Value: {{ questionFormGroup.value.secretLairs | json }}</p>
        </pre>
-->
      <!--end form-->
  </div>

  <div class="col-sm-1" >
    <div class="row">
      <div class="sidebar">
        <ul class="nav nav-sidebar form-side-editor-main" style="">
          <li class="form-side-editor-fxn" 
              (click)="onAddQuestion()">
              <a  [routerLink]="['.']">
                <i class="fa fa-3x fa-plus-circle"></i>
              </a>
          </li>
          <li class="form-side-editor-fxn" 
              (click)="onAddSection()">
              <a  [routerLink]="['.']">
                <i class="fa fa-3x fa-th-list"></i>
              </a>
          </li>
          <li class="form-side-editor-fxn" >
            <a  [routerLink]="['../../preview',0]">
              <i class="fa fa-3x fa-eye"></i>
            </a>
          </li>
          <li class="form-side-editor-fxn" 
              (click)="onSaveClick(questionFormGroup.value.secretLairs)">
              <a  [routerLink]="['.']">
                <i class="fa fa-3x fa-save"></i>
              </a>
          </li>
          <!--<li class="form-side-editor-fxn" 
              (click)="onSaveClick(question)">
            <i class="fa fa-3x fa-file-o"></i>
          </li>
          <li class="form-side-editor-fxn" 
              (click)="onSaveClick(question)">
            <i class="fa fa-3x fa-th-list"></i>
          </li>-->
        </ul>
      </div>
    </div>

</div> 
<!-- end section -->
